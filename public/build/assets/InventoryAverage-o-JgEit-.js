import{u,r as j,j as e,H as g,L as x}from"./app-C5YpV5xv.js";import{A as y}from"./AuthenticatedLayout-CE0IJ3yK.js";import{T as s}from"./Tooltip-C4pGBSOQ.js";import{C as d}from"./Currency-C2PZfQ47.js";import"./transition-DXfmz4OZ.js";function w({filters:r={},products:a,options:n}){const{data:i,setData:l,get:o,processing:h}=u({from:r.from||"",to:r.to||"",product_id:r.product_id||"",vendor_id:r.vendor_id||""}),p=t=>{t.preventDefault(),o(route("reports.inventoryAverage"))},c=j.useMemo(()=>a?.data||[],[a]);return e.jsxs(y,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Inventory Average Cost"}),children:[e.jsx(g,{title:"Inventory Average Cost"}),e.jsxs("div",{className:"mx-auto max-w-7xl p-6 space-y-6",children:[e.jsxs("form",{onSubmit:p,className:"rounded bg-white p-4 shadow space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600 flex items-center gap-1",children:["From ",e.jsx(s,{text:"Start date to include purchases.",children:"i"})]}),e.jsx("input",{type:"date",value:i.from,onChange:t=>l("from",t.target.value),className:"w-full rounded border px-3 py-2"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600 flex items-center gap-1",children:["To ",e.jsx(s,{text:"End date to include purchases.",children:"i"})]}),e.jsx("input",{type:"date",value:i.to,onChange:t=>l("to",t.target.value),className:"w-full rounded border px-3 py-2"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Product ",e.jsx(s,{text:"Filter by product.",children:"i"})]}),e.jsxs("select",{value:i.product_id,onChange:t=>l("product_id",t.target.value),className:"w-full rounded border px-3 py-2",children:[e.jsx("option",{value:"",children:"All"}),n?.products?.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Vendor ",e.jsx(s,{text:"Filter by vendor who supplied purchases.",children:"i"})]}),e.jsxs("select",{value:i.vendor_id,onChange:t=>l("vendor_id",t.target.value),className:"w-full rounded border px-3 py-2",children:[e.jsx("option",{value:"",children:"All"}),n?.vendors?.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{disabled:h,className:"rounded bg-indigo-600 px-4 py-2 text-white hover:bg-indigo-700 disabled:opacity-50",children:"Apply Filters"}),e.jsx(x,{href:route("reports.inventoryAverage"),className:"rounded border px-4 py-2",children:"Reset"})]})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left",children:[e.jsxs("th",{className:"px-2 py-2",children:["Product ",e.jsx(s,{text:"Product name and SKU.",children:"i"})]}),e.jsxs("th",{className:"px-2 py-2 text-right",children:["Stock ",e.jsx(s,{text:"Current on-hand stock.",children:"i"})]}),e.jsxs("th",{className:"px-2 py-2 text-right",children:["Old Qty ",e.jsx(s,{text:"Quantity from previous batches.",children:"i"})]}),e.jsxs("th",{className:"px-2 py-2 text-right",children:["Old Unit Cost ",e.jsx(s,{text:"Estimated average cost for previous batches.",children:"i"})]}),e.jsxs("th",{className:"px-2 py-2 text-right",children:["New Qty ",e.jsx(s,{text:"Quantity in the most recent batch.",children:"i"})]}),e.jsxs("th",{className:"px-2 py-2 text-right",children:["New Unit Cost ",e.jsx(s,{text:"Unit cost of the most recent batch.",children:"i"})]}),e.jsxs("th",{className:"px-2 py-2 text-right",children:["Weighted Avg Cost ",e.jsx(s,{text:"Weighted by purchase quantities across batches in range.",children:"i"})]}),e.jsxs("th",{className:"px-2 py-2 text-right",children:["Change ",e.jsx(s,{text:"New Unit Cost minus Old Unit Cost. Red=up, Green=down.",children:"i"})]}),e.jsxs("th",{className:"px-2 py-2",children:["Last Purchased ",e.jsx(s,{text:"Timestamp of the latest purchase in range.",children:"i"})]})]})}),e.jsxs("tbody",{children:[c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-2 py-6 text-center text-gray-500",children:"No data"})}),c.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-2 py-2",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:t.name}),t.sku&&e.jsxs("span",{className:"text-xs text-gray-500",children:["SKU: ",t.sku]})]})}),e.jsx("td",{className:"px-2 py-2 text-right",children:t.stock}),e.jsx("td",{className:"px-2 py-2 text-right",children:t.old_qty}),e.jsx("td",{className:"px-2 py-2 text-right",children:e.jsx(d,{value:t.old_unit_cost})}),e.jsx("td",{className:"px-2 py-2 text-right",children:t.new_qty}),e.jsx("td",{className:"px-2 py-2 text-right",children:e.jsx(d,{value:t.new_unit_cost})}),e.jsx("td",{className:"px-2 py-2 text-right",children:e.jsx(d,{value:t.weighted_avg_unit_cost})}),e.jsx("td",{className:`px-2 py-2 text-right ${t.price_change>0?"text-red-600":t.price_change<0?"text-green-600":""}`,children:e.jsx(d,{value:t.price_change})}),e.jsx("td",{className:"px-2 py-2",children:t.last_purchase_at||"-"})]},t.id))]})]}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",a.from," - ",a.to," of ",a.total]}),e.jsx("div",{className:"flex items-center gap-2",children:a.links?.map((t,m)=>e.jsx(x,{href:t.url||"#",className:`px-3 py-1 rounded border ${t.active?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700"}`,dangerouslySetInnerHTML:{__html:t.label}},m))})]})]})]})]})}export{w as default};

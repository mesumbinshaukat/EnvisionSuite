import{u as y,r as b,j as e,H as v,L as f}from"./app-ClOAtnmS.js";import{A as w}from"./AuthenticatedLayout-DzJSzJS8.js";import{e as _,C as D,b as L,L as C,P,f as S,p as T,a as E}from"./index-CnsclvVs.js";import{f as t}from"./currency-DO5TMxe2.js";import"./transition-C3LUfanD.js";D.register(L,C,P,S,T,E);function U({auth:n,filters:c,sales:d,total:o,pricingStats:l,paymentAggregates:m=[],discountsByCustomer:p=[],discountsByProduct:h=[]}){const{get:u,data:r,setData:x}=y({from:c.from,to:c.to}),g=s=>{s.preventDefault(),u(route("reports.sales"),{preserveState:!0})},j=b.useMemo(()=>{const s=(d.data||[]).reverse(),a=s.map(i=>new Date(i.created_at).toLocaleDateString()),N=s.map(i=>parseFloat(i.total));return{labels:a,datasets:[{label:"Sales Total",data:N,borderColor:"#2563eb",backgroundColor:"rgba(37,99,235,0.2)"}]}},[d]);return e.jsxs(w,{user:n.user,children:[e.jsx(v,{title:"Sales Report"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Sales Report"}),e.jsxs("form",{onSubmit:g,className:"flex gap-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"From"}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:r.from,onChange:s=>x("from",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"To"}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:r.to,onChange:s=>x("to",s.target.value)})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Apply"}),e.jsx(f,{className:"px-4 py-2 bg-green-600 text-white rounded",href:route("reports.sales.export",{from:r.from,to:r.to}),children:"Export Excel"})]}),e.jsx("div",{className:"bg-white p-4 rounded shadow",children:e.jsx(_,{data:j})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Average Sold Price"}),e.jsx("div",{className:"text-2xl font-semibold",children:t(Number(l?.avg_sold_price??0))})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Units @ Original Price"}),e.jsx("div",{className:"text-2xl font-semibold",children:l?.units_original_price??0})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Units @ Discounted Price"}),e.jsx("div",{className:"text-2xl font-semibold",children:l?.units_discounted_price??0})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:m.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs uppercase text-gray-500",children:s.status}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:["Count: ",s.cnt]}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:["Paid: ",t(Number(s.paid_sum))]}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:["Total: ",t(Number(s.total_sum))]})]},s.status))}),e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(d.data||[]).map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s.id}),e.jsx("td",{className:"px-4 py-2",children:new Date(s.created_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-2",children:t(Number(s.total))})]},s.id))})]}),e.jsxs("div",{className:"p-4 text-right font-semibold",children:["Total: ",t(Number(o))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"Top Discounts by Customer"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"Line Discount"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"Header Discount"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"Total Discount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(p||[]).map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s.customer_name||"Walk-in"}),e.jsx("td",{className:"px-4 py-2 text-right",children:t(Number(s.line_discount))}),e.jsx("td",{className:"px-4 py-2 text-right",children:t(Number(s.header_discount))}),e.jsx("td",{className:"px-4 py-2 text-right font-semibold",children:t(Number(s.total_discount))})]},a))})]})]}),e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"Top Discounts by Product"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"Line Discount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(h||[]).map((s,a)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s.product_name}),e.jsx("td",{className:"px-4 py-2 text-right",children:t(Number(s.line_discount))})]},a))})]})]})]})]})]})}export{U as default};

import{u as g,r as x,j as e,H as j,L as l}from"./app-CtQDaI7d.js";import{A as y}from"./AuthenticatedLayout-BmdE4ikK.js";import{C as i}from"./Currency-CszHn8AI.js";import"./transition-TUICTNyj.js";import"./HelpInjector-BfWS8fx6.js";import"./InfoIcon-CwQLPO0h.js";function S({filters:d={},rows:a=[]}){const{data:c,setData:n,get:m,processing:h}=g({from:d.from||"",to:d.to||""}),[r,p]=x.useState(""),u=s=>{s.preventDefault(),m(route("customers.history"))},o=x.useMemo(()=>{const s=(r||"").toLowerCase();return s?a.filter(t=>t.name&&t.name.toLowerCase().includes(s)||String(t.sales_count??"").includes(s)||String(t.outstanding??"").includes(s)):a},[a,r]);return e.jsxs(y,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Customer History"}),children:[e.jsx(j,{title:"Customer History"}),e.jsxs("div",{className:"mx-auto max-w-7xl p-6 space-y-6",children:[e.jsxs("form",{onSubmit:u,className:"rounded bg-white p-4 shadow space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"From"}),e.jsx("input",{type:"date",value:c.from,onChange:s=>n("from",s.target.value),className:"w-full rounded border px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"To"}),e.jsx("input",{type:"date",value:c.to,onChange:s=>n("to",s.target.value),className:"w-full rounded border px-3 py-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Search"}),e.jsx("input",{placeholder:"Search customers (realtime)",value:r,onChange:s=>p(s.target.value),className:"w-full rounded border px-3 py-2"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{disabled:h,className:"rounded bg-indigo-600 px-4 py-2 text-white hover:bg-indigo-700 disabled:opacity-50",children:"Apply"}),e.jsx(l,{href:route("customers.history"),className:"rounded border px-4 py-2",children:"Reset"})]})]}),e.jsx("div",{className:"rounded bg-white p-4 shadow overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left",children:[e.jsx("th",{className:"px-2 py-2",children:"Customer"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Sales Count"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Total Sales"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Total Receipts"}),e.jsx("th",{className:"px-2 py-2 text-right",children:"Outstanding"}),e.jsx("th",{className:"px-2 py-2",children:"Last Activity"}),e.jsx("th",{className:"px-2 py-2",children:"Actions"})]})}),e.jsxs("tbody",{children:[o.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-2 py-6 text-center text-gray-500",children:"No data"})}),o.map((s,t)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-2 py-2",children:s.name}),e.jsx("td",{className:"px-2 py-2 text-right",children:s.sales_count}),e.jsx("td",{className:"px-2 py-2 text-right",children:e.jsx(i,{value:s.total_sales})}),e.jsx("td",{className:"px-2 py-2 text-right",children:e.jsx(i,{value:s.total_receipts})}),e.jsx("td",{className:`px-2 py-2 text-right ${s.outstanding>0?"text-red-600":""}`,children:e.jsx(i,{value:s.outstanding})}),e.jsx("td",{className:"px-2 py-2",children:s.last_activity||"-"}),e.jsx("td",{className:"px-2 py-2",children:s.customer_id?e.jsx(l,{href:route("customers.ledger",s.customer_id),className:"text-indigo-600 hover:underline",children:"View Ledger"}):e.jsx(l,{href:route("customers.ledger",0),className:"text-indigo-600 hover:underline",children:"View Ledger"})})]},t))]})]})})]})]})}export{S as default};

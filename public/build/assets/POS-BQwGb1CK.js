import{u as j,r as m,j as e,H as g,L as y}from"./app-2_i_d-ku.js";import{A as N}from"./AuthenticatedLayout-C94KQxiY.js";import{B as c,C as f,b as v,L as w,c as _,d as C,p as P,a as S}from"./index-Wt44rq-x.js";import{f as k}from"./currency-DO5TMxe2.js";import"./transition-C-Ua1sRD.js";f.register(v,w,_,C,P,S);function A({auth:n,filters:t,sales:l,summary:i}){const{data:s,setData:r,get:h,processing:x}=j({from:t.from,to:t.to,payment_method:t.payment_method||""}),p=a=>{a.preventDefault(),h(route("reports.pos"),{preserveState:!0})},d=i.by_method||[],o=i.by_cashier||[],u=m.useMemo(()=>({labels:d.map(a=>a.payment_method||"N/A"),datasets:[{label:"Total",backgroundColor:"#2563eb",data:d.map(a=>Number(a.s||0))}]}),[d]),b=m.useMemo(()=>({labels:o.map(a=>`User ${a.user_id}`),datasets:[{label:"Total",backgroundColor:"#059669",data:o.map(a=>Number(a.s||0))}]}),[o]);return e.jsxs(N,{user:n.user,children:[e.jsx(g,{title:"POS Reports"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"POS Reports"}),e.jsx(y,{href:route("reports.pos.export",s),className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700",children:"Export Excel"})]}),e.jsxs("form",{onSubmit:p,className:"bg-white shadow rounded p-4 grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"From"}),e.jsx("input",{type:"date",className:"mt-1 w-full border-gray-300 rounded",value:s.from,onChange:a=>r("from",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"To"}),e.jsx("input",{type:"date",className:"mt-1 w-full border-gray-300 rounded",value:s.to,onChange:a=>r("to",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"Payment Method"}),e.jsx("input",{className:"mt-1 w-full border-gray-300 rounded",placeholder:"cash/card/mobile...",value:s.payment_method,onChange:a=>r("payment_method",a.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:x,children:"Apply"})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 shadow rounded",children:[e.jsx("div",{className:"mb-2 font-medium",children:"Totals by Payment Method"}),e.jsx(c,{data:u})]}),e.jsxs("div",{className:"bg-white p-4 shadow rounded",children:[e.jsx("div",{className:"mb-2 font-medium",children:"Totals by Cashier"}),e.jsx(c,{data:b})]})]}),e.jsx("div",{className:"bg-white shadow rounded overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"ID"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Customer"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Cashier"}),e.jsx("th",{className:"px-4 py-2 text-left",children:"Payment"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:l.data.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:a.id}),e.jsx("td",{className:"px-4 py-2",children:new Date(a.created_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-2",children:a.customer?.name||"-"}),e.jsx("td",{className:"px-4 py-2",children:a.user?.name||"-"}),e.jsx("td",{className:"px-4 py-2",children:a.payment_method||"-"}),e.jsx("td",{className:"px-4 py-2 text-right",children:k(Number(a.total||0))})]},a.id))})]})}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Page ",l.current_page," of ",l.last_page]})]})]})}export{A as default};

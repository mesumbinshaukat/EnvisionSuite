import{u as N,r as v,j as e,H as b,L as f}from"./app-CL1vorpm.js";import{A as k}from"./AuthenticatedLayout-DXtsPQSh.js";import{e as w,C as D,b as C,L,P,f as T,p as S,a as F}from"./index-BI5fo2dP.js";import{F as s,a,b as E}from"./FmtDate-DSmhVkOG.js";import"./transition-CnGl0oHU.js";import"./HelpInjector-DIbWsAu8.js";import"./InfoIcon-DpOHKBrY.js";D.register(C,L,P,T,S,F);function O({auth:p,filters:c,sales:r,total:o,pricingStats:i,paymentAggregates:h=[],discountsByCustomer:m=[],discountsByProduct:u=[]}){const{get:y,data:d,setData:n}=N({from:c.from,to:c.to}),g=t=>{t.preventDefault(),y(route("reports.sales"),{preserveState:!0})},j=v.useMemo(()=>{const t=(r.data||[]).reverse(),l=t.map(x=>new Date(x.created_at).toLocaleDateString()),_=t.map(x=>parseFloat(x.total));return{labels:l,datasets:[{label:"Sales Total",data:_,borderColor:"#2563eb",backgroundColor:"rgba(37,99,235,0.2)"}]}},[r]);return e.jsxs(k,{user:p.user,children:[e.jsx(b,{title:"Sales Report"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-xl font-semibold flex items-center gap-2","data-help-key":"sales_report_title",children:"Sales Report"}),e.jsxs("form",{onSubmit:g,className:"flex gap-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 flex items-center gap-2","data-help-key":"sales_filter_from",children:"From"}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:d.from,onChange:t=>n("from",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 flex items-center gap-2","data-help-key":"sales_filter_to",children:"To"}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:d.to,onChange:t=>n("to",t.target.value)})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Apply"}),e.jsx(f,{className:"px-4 py-2 bg-green-600 text-white rounded",href:route("reports.sales.export",{from:d.from,to:d.to}),children:"Export Excel"})]}),e.jsx("div",{className:"bg-white p-4 rounded shadow",children:e.jsx(w,{data:j})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500 flex items-center gap-2","data-help-key":"sales_avg_sold_price",children:"Average Sold Price"}),e.jsx("div",{className:"text-2xl font-semibold",children:e.jsx(s,{value:i?.avg_sold_price??0})})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500 flex items-center gap-2","data-help-key":"sales_units_original",children:"Units @ Original Price"}),e.jsx("div",{className:"text-2xl font-semibold",children:e.jsx(a,{value:i?.units_original_price??0})})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500 flex items-center gap-2","data-help-key":"sales_units_discounted",children:"Units @ Discounted Price"}),e.jsx("div",{className:"text-2xl font-semibold",children:e.jsx(a,{value:i?.units_discounted_price??0})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:h.map(t=>e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs uppercase text-gray-500",children:t.status}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:["Count: ",e.jsx(a,{value:t.cnt})]}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:["Paid: ",e.jsx(s,{value:t.paid_sum})]}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:["Total: ",e.jsx(s,{value:t.total_sum})]})]},t.status))}),e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase","data-help-key":"sales_th_id",children:"ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase","data-help-key":"sales_th_date",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase","data-help-key":"sales_th_customer",children:"Customer"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase","data-help-key":"sales_th_type",children:"Type"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase","data-help-key":"sales_th_items",children:"Items"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase","data-help-key":"sales_th_units",children:"Units"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase","data-help-key":"sales_th_paid",children:"Paid"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase","data-help-key":"sales_th_payment",children:"Payment"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase","data-help-key":"sales_th_total",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(r.data||[]).map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:e.jsx(a,{value:t.id})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx(E,{value:t.created_at,options:{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}})}),e.jsx("td",{className:"px-4 py-2",children:t.customer_name||"Walk-in"}),e.jsx("td",{className:"px-4 py-2",children:t.customer_type}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(a,{value:t.items_count})}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(a,{value:t.units_count})}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(s,{value:t.amount_paid||0})}),e.jsx("td",{className:"px-4 py-2",children:t.payment_status||"-"}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(s,{value:t.total})})]},t.id))})]}),e.jsxs("div",{className:"p-4 text-right font-semibold",children:["Total: ",e.jsx(s,{value:o})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsx("div",{className:"px-4 py-2 font-semibold","data-help-key":"sales_dc_total_discount",children:"Top Discounts by Customer"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase","data-help-key":"sales_dc_customer",children:"Customer"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase","data-help-key":"sales_dc_line_discount",children:"Line Discount"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase","data-help-key":"sales_dc_header_discount",children:"Header Discount"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase","data-help-key":"sales_dc_total_discount",children:"Total Discount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(m||[]).map((t,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:t.customer_name||"Walk-in"}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(s,{value:t.line_discount})}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(s,{value:t.header_discount})}),e.jsx("td",{className:"px-4 py-2 text-right font-semibold",children:e.jsx(s,{value:t.total_discount})})]},l))})]})]}),e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsx("div",{className:"px-4 py-2 font-semibold","data-help-key":"sales_dp_line_discount",children:"Top Discounts by Product"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase","data-help-key":"sales_dp_product",children:"Product"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase","data-help-key":"sales_dp_line_discount",children:"Line Discount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(u||[]).map((t,l)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:t.product_name}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(s,{value:t.line_discount})})]},l))})]})]})]})]})]})}export{O as default};

import{j as e,H as S,L as $}from"./app-ClOAtnmS.js";import{A as P}from"./AuthenticatedLayout-DzJSzJS8.js";import{f as c}from"./currency-DO5TMxe2.js";import"./transition-C3LUfanD.js";function M({aggregates:n,chart:i}){const b=i?.days??14,h=i?.labels??[],m=i?.spend??[],p=i?.qty??[],j=920,u=280,s={t:16,r:40,b:40,l:48},d=j-s.l-s.r,l=u-s.t-s.b,r=h.length||1,N=Math.max(1,...m),v=Math.max(1,...p),x=t=>s.l+t*d/Math.max(1,r-1),w=t=>s.t+l-t/N*l,y=t=>s.t+l-t/v*l,f=m.map((t,a)=>`${a===0?"M":"L"} ${x(a)} ${w(t)}`).join(" "),g=Math.min(24,d/Math.max(1,r)*.6),o=({d:t,children:a})=>e.jsx($,{href:route("reports.purchases",{days:t}),preserveState:!0,preserveScroll:!0,className:`px-3 py-1 rounded border text-sm ${b===t?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:a});return e.jsxs(P,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Purchases Report"}),children:[e.jsx(S,{title:"Purchases Report"}),e.jsxs("div",{className:"mx-auto max-w-6xl p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Spend"}),e.jsx("div",{className:"text-2xl font-semibold",children:c(Number(n.totalSpend??0))})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Quantity"}),e.jsx("div",{className:"text-2xl font-semibold",children:n.totalQty??0})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Unit Cost"}),e.jsx("div",{className:"text-2xl font-semibold",children:c(Number(n.avgUnitCost??0))})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Outstanding Payables"}),e.jsx("div",{className:"text-2xl font-semibold",children:c(Number(n.outstanding??0))})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Purchases over time"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{d:7,children:"7d"}),e.jsx(o,{d:14,children:"14d"}),e.jsx(o,{d:30,children:"30d"})]})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow overflow-x-auto",children:[e.jsxs("svg",{viewBox:`0 0 ${j} ${u}`,className:"w-full h-72",children:[e.jsx("line",{x1:s.l,y1:s.t+l,x2:s.l+d,y2:s.t+l,stroke:"#E5E7EB"}),e.jsx("line",{x1:s.l,y1:s.t,x2:s.l,y2:s.t+l,stroke:"#E5E7EB"}),e.jsx("path",{d:`${f} L ${s.l+d} ${s.t+l} L ${s.l} ${s.t+l} Z`,fill:"rgba(99,102,241,0.12)"}),e.jsx("path",{d:f,fill:"none",stroke:"#6366F1",strokeWidth:"2"}),p.map((t,a)=>e.jsx("rect",{x:x(a)-g/2,y:y(t),width:g,height:s.t+l-y(t),fill:"#10B981",opacity:"0.7"},a)),e.jsx("text",{x:s.l-8,y:s.t+10,textAnchor:"end",fontSize:"10",fill:"#6B7280",children:"Spend"}),e.jsx("text",{x:s.l+d+8,y:s.t+10,textAnchor:"start",fontSize:"10",fill:"#6B7280",children:"Qty"}),h.map((t,a)=>r<=12||a%Math.ceil(r/12)===0?e.jsx("text",{x:x(a),y:s.t+l+16,textAnchor:"middle",fontSize:"10",fill:"#6B7280",children:t.slice(5)},a):null)]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block h-3 w-3 rounded-full bg-indigo-500"})," Spend"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block h-3 w-3 rounded-full bg-emerald-500"})," Quantity"]})]})]})]})]})}export{M as default};

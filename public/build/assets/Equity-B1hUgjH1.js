import{u as S,r as g,j as e,H as L,L as v}from"./app-BpbEyoxA.js";import{A as $}from"./AuthenticatedLayout-eYnlr3pS.js";import{F as p}from"./FmtCurrency-CP5soS7u.js";import{F as f}from"./FmtNumber-DhU7Liky.js";import{f as E,B as q,L as M,C as T,a as F,b as H,P as R,c as B,g as U,A as W,d as A,e as D}from"./index-zdU4aQa0.js";import"./transition-GXVTtJgq.js";import"./HelpInjector-BdYANK49.js";import"./InfoIcon-BKj8MgZu.js";T.register(F,H,R,B,U,W,A,D);function Z({auth:w,balances:t,salesAverages:i,priceInsights:l,probabilities:o}){const{t:a,n:O,currency:h,isRTL:b}=S(),u=({paginator:s,pageParam:r,perPageParam:j})=>{if(!s)return null;const x=s.links||[],d=s.current_page||s.meta?.current_page,y=s.last_page||s.meta?.last_page,N=s.per_page||s.meta?.per_page;if(x&&x.length>0)return e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 text-sm text-gray-600",children:[e.jsxs("div",{children:[a("page")," ",d," ",a("of")," ",y," (",s.total||s.meta?.total||0,")"]}),e.jsx("div",{className:"flex gap-1",children:x.map((c,n)=>e.jsx(v,{href:c.url||"#",className:`px-2 py-1 rounded ${c.active?"bg-blue-600 text-white":"bg-gray-100 hover:bg-gray-200"} ${c.url?"":"opacity-50 cursor-not-allowed"}`,preserveScroll:!0,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:c.label}})},n))})]});const _=c=>{const n=new URL(window.location.href);return n.searchParams.set(r,String(c)),N&&n.searchParams.set(j,String(N)),n.pathname+n.search};return e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 text-sm text-gray-600",children:[e.jsxs("div",{children:[a("page")," ",d," ",a("of")," ",y]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(v,{href:d>1?_(d-1):"#",className:`px-2 py-1 rounded ${d>1?"bg-gray-100 hover:bg-gray-200":"opacity-50 cursor-not-allowed"}`,preserveScroll:!0,children:a("previous")}),e.jsx(v,{href:d<y?_(d+1):"#",className:`px-2 py-1 rounded ${d<y?"bg-gray-100 hover:bg-gray-200":"opacity-50 cursor-not-allowed"}`,preserveScroll:!0,children:a("next")})]})]})},k=g.useMemo(()=>({labels:[a("cash_balance"),a("bank_balance"),a("inventory_value"),a("receivables")],datasets:[{data:[t?.cash||0,t?.bank||0,t?.inventory||0,t?.receivables||0],backgroundColor:["#22c55e","#0ea5e9","#6366f1","#f59e0b"]}]}),[t,a]),P=g.useMemo(()=>({labels:[a("assets"),a("liabilities"),a("net_worth")],datasets:[{label:a("equity_dashboard"),data:[Number(t?.assetsTotal)||0,Number(t?.liabilitiesTotal)||0,Number(t?.netWorth)||0],backgroundColor:["#10b981","#ef4444","#2563eb"]}]}),[t,a]),C=g.useMemo(()=>({labels:[a("avg_daily"),a("avg_weekly"),a("avg_monthly")],datasets:[{label:a("average_sales"),data:[i?.daily||0,i?.weekly||0,i?.monthly||0],borderColor:"#2563eb",backgroundColor:"rgba(37,99,235,0.2)"}]}),[i,a]),m=g.useMemo(()=>({maintainAspectRatio:!1,plugins:{legend:{labels:{usePointStyle:!0},align:b?"start":"center"},tooltip:{callbacks:{label:s=>{const r=s.parsed,j=r&&typeof r=="object"?r.y??s.raw:r??s.raw,x=Number(j)||0;return`${s.dataset.label?s.dataset.label+": ":""}${h(x)}`}}}},scales:{y:{ticks:{callback:s=>h(s)}},x:{ticks:{autoSkip:!0,maxTicksLimit:8}}}}),[h,b]);return e.jsxs($,{user:w?.user,children:[e.jsx(L,{title:a("equity_dashboard")}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-xl font-semibold","data-help-key":"equity_title",children:a("equity_dashboard")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500","data-help-key":"store_worth",children:a("store_worth")}),e.jsx("div",{className:"text-2xl font-semibold",children:e.jsx(p,{value:t?.netWorth||0})})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500","data-help-key":"net_cash_after_liabilities",children:a("net_cash_after_liabilities")}),e.jsx("div",{className:"text-2xl font-semibold",children:e.jsx(p,{value:(t?.cash||0)+(t?.bank||0)+(t?.receivables||0)-(t?.payables||0)})})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500","data-help-key":"avg_daily",children:a("avg_daily")}),e.jsx("div",{className:"text-2xl font-semibold",children:e.jsx(p,{value:i?.daily||0})})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500","data-help-key":"avg_monthly",children:a("avg_monthly")}),e.jsx("div",{className:"text-2xl font-semibold",children:e.jsx(p,{value:i?.monthly||0})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-sm font-semibold mb-2","data-help-key":"assets_breakdown",children:a("assets_breakdown")}),e.jsx("div",{className:"h-64",children:e.jsx(E,{data:k,options:m})})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow md:col-span-2",children:[e.jsx("div",{className:"text-sm font-semibold mb-2","data-help-key":"net_overview",children:a("net_overview")}),e.jsx("div",{className:"h-64",children:e.jsx(q,{data:P,options:m})})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-sm font-semibold mb-2","data-help-key":"average_sales",children:a("average_sales")}),e.jsx("div",{className:"h-64",children:e.jsx(M,{data:C,options:{...m,plugins:{...m.plugins,tooltip:{callbacks:{label:s=>`${s.dataset.label?s.dataset.label+": ":""}${h(Number(s.parsed.y||s.parsed))}`}}}}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsx("div",{className:"px-4 py-2 font-semibold","data-help-key":"price_increase_trend",children:a("price_increase_trend")}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"% Change"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[(l?.increases?.data||l?.increases||[]).map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s.product_name}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(f,{value:s.change_pct})})]},r)),(l?.increases?.data?.length??0)===0&&(l?.increases?.length??0)===0&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:2,children:"—"})})]})]}),e.jsx(u,{paginator:l?.increases,pageParam:"increases_page",perPageParam:"increases_per_page"})]}),e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsx("div",{className:"px-4 py-2 font-semibold","data-help-key":"vendor_price_comparison",children:a("vendor_price_comparison")}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Vendor"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"Avg Unit Cost"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[(l?.vendorComparisons?.data||l?.vendorComparisons||[]).map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s.product_name}),e.jsx("td",{className:"px-4 py-2",children:s.vendor_name}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(p,{value:s.avg_cost})})]},r)),(l?.vendorComparisons?.data?.length??0)===0&&(l?.vendorComparisons?.length??0)===0&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:3,children:"—"})})]})]}),e.jsx(u,{paginator:l?.vendorComparisons,pageParam:"vendor_page",perPageParam:"vendor_per_page"})]})]}),e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsx("div",{className:"px-4 py-2 font-semibold","data-help-key":"probability_high_sales",children:a("probability_high_sales")}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"Probability"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[(o?.topProducts?.data||o?.topProducts||[]).map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s.product_name}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx(f,{value:s.probability})})]},r)),(o?.topProducts?.data?.length??0)===0&&(o?.topProducts?.length??0)===0&&e.jsx("tr",{children:e.jsx("td",{className:"px-4 py-6 text-center text-gray-500",colSpan:2,children:"—"})})]})]}),e.jsx(u,{paginator:o?.topProducts,pageParam:"products_page",perPageParam:"products_per_page"})]})]})]})}export{Z as default};

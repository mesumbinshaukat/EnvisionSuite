import{u as m,r as n,j as e,H as p,L as x}from"./app-3WHj1xnA.js";import{A as g}from"./AuthenticatedLayout-DMhsWmQ9.js";import{T as h}from"./Tooltip-DC69_Ejn.js";import{f as l}from"./currency-DO5TMxe2.js";import"./transition-C8ASTdTE.js";function y({rule:a}){const{data:s,setData:i,put:c,processing:d}=m({cost_basis:a.cost_basis||"average",fixed_cost:a.fixed_cost??"",margin_type:a.margin_type||"percent",margin_value:String(a.margin_value??""),scope_type:a.scope_type||"all_units",scope_qty:a.scope_qty??"",discount_type:a.discount_type||"none",discount_value:String(a.discount_value??""),starts_at:a.starts_at?a.starts_at.substring(0,16):"",ends_at:a.ends_at?a.ends_at.substring(0,16):"",notes:a.notes??"",active:!!a.active}),o=t=>{t.preventDefault(),c(route("pricing.update",a.id))},r=n.useMemo(()=>s.margin_type==="percent"?`${Number(s.margin_value||0)}%`:l(Number(s.margin_value||0)),[s.margin_type,s.margin_value]),u=n.useMemo(()=>s.discount_type==="percent"?`${Number(s.discount_value||0)}%`:s.discount_type==="amount"?l(Number(s.discount_value||0)):"None",[s.discount_type,s.discount_value]);return e.jsxs(g,{header:e.jsx("h2",{className:"text-xl font-semibold",children:"Edit Pricing Rule"}),children:[e.jsx(p,{title:`Edit Pricing Rule #${a.id}`}),e.jsxs("div",{className:"mx-auto max-w-5xl p-6 space-y-6",children:[e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"mb-2 text-sm text-gray-600",children:["Editing rule for ",e.jsx("span",{className:"font-medium",children:a.product?.name})," ",e.jsxs("span",{className:"text-gray-500",children:["(",a.product?.sku,")"]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Current settings summary: Margin ",r,", Discount ",u,", Scope ",s.scope_type==="all_units"?"All units":`${s.scope_qty||0} units`,"."]})]}),e.jsxs("form",{onSubmit:o,className:"rounded bg-white p-4 shadow space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium",children:["Cost Basis ",e.jsx(h,{text:"Use last, average or a fixed cost value.",children:"i"})]}),e.jsxs("select",{className:"mt-1 w-full rounded border p-2",value:s.cost_basis,onChange:t=>i("cost_basis",t.target.value),children:[e.jsx("option",{value:"average",children:"Weighted Average"}),e.jsx("option",{value:"last",children:"Last Purchase"}),e.jsx("option",{value:"fixed",children:"Fixed Cost"})]})]}),s.cost_basis==="fixed"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Fixed Cost"}),e.jsx("input",{type:"number",step:"0.0001",min:0,className:"mt-1 w-full rounded border p-2",value:s.fixed_cost,onChange:t=>i("fixed_cost",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Margin"}),e.jsxs("div",{className:"mt-1 flex gap-2",children:[e.jsxs("select",{className:"rounded border p-2",value:s.margin_type,onChange:t=>i("margin_type",t.target.value),children:[e.jsx("option",{value:"percent",children:"Percent"}),e.jsx("option",{value:"amount",children:"Amount"})]}),e.jsx("input",{type:"number",step:"0.01",min:0,className:"flex-1 rounded border p-2",value:s.margin_value,onChange:t=>i("margin_value",t.target.value)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Scope"}),e.jsxs("select",{className:"mt-1 w-full rounded border p-2",value:s.scope_type,onChange:t=>i("scope_type",t.target.value),children:[e.jsx("option",{value:"all_units",children:"All Units"}),e.jsx("option",{value:"specific_qty",children:"Specific Quantity"})]})]}),s.scope_type==="specific_qty"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Scope Quantity"}),e.jsx("input",{type:"number",min:1,className:"mt-1 w-full rounded border p-2",value:s.scope_qty,onChange:t=>i("scope_qty",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Discount"}),e.jsxs("div",{className:"mt-1 flex gap-2",children:[e.jsxs("select",{className:"rounded border p-2",value:s.discount_type,onChange:t=>i("discount_type",t.target.value),children:[e.jsx("option",{value:"none",children:"None"}),e.jsx("option",{value:"percent",children:"Percent"}),e.jsx("option",{value:"amount",children:"Amount"})]}),e.jsx("input",{type:"number",step:"0.01",min:0,className:"flex-1 rounded border p-2",value:s.discount_value,onChange:t=>i("discount_value",t.target.value)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Starts At"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded border p-2",value:s.starts_at,onChange:t=>i("starts_at",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Ends At"}),e.jsx("input",{type:"datetime-local",className:"mt-1 w-full rounded border p-2",value:s.ends_at,onChange:t=>i("ends_at",t.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.active,onChange:t=>i("active",t.target.checked)})," Active"]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium",children:"Notes"}),e.jsx("textarea",{className:"mt-1 w-full rounded border p-2",rows:3,value:s.notes,onChange:t=>i("notes",t.target.value)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(x,{href:route("pricing.index"),className:"rounded border px-4 py-2",children:"Back"}),e.jsx("button",{disabled:d,className:"rounded bg-blue-600 px-4 py-2 text-white",children:"Save Changes"})]})]})]})]})}export{y as default};

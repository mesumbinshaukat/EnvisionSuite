import{u as C,r as l,j as e,H as D,L as A}from"./app-XRLTg30Q.js";import{T as s}from"./Tooltip-BaMJ1KxZ.js";import{A as T}from"./AuthenticatedLayout-lK84dmDI.js";import{f as i}from"./currency-DO5TMxe2.js";import{d as k,B as L,C as E,b as M,L as S,P as _,e as B,c as J,p as P,a as $}from"./index-6vwJyijh.js";import"./transition-CYqwWJkp.js";E.register(M,S,_,B,J,P,$);function W({auth:u,filters:c,entries:o,aggregates:a}){const{data:n,setData:x,get:b,processing:j}=C({from:c.from,to:c.to}),g=t=>{t.preventDefault(),b(route("reports.accounting.journals"),{preserveState:!0})},r=a?.series??[],m=l.useMemo(()=>r.map(t=>t.date),[r]),h=l.useMemo(()=>r.map(t=>Number(t.debit||0)),[r]),p=l.useMemo(()=>r.map(t=>Number(t.credit||0)),[r]),N=l.useMemo(()=>({labels:m,datasets:[{label:"Debit",data:h,borderColor:"#10b981",backgroundColor:"rgba(16,185,129,0.2)",tension:.25},{label:"Credit",data:p,borderColor:"#ef4444",backgroundColor:"rgba(239,68,68,0.2)",tension:.25}]}),[m,h,p]),v=l.useMemo(()=>({labels:["Totals"],datasets:[{label:"Total Debit",data:[Number(a?.totals?.debit||0)],backgroundColor:"#10b981"},{label:"Total Credit",data:[Number(a?.totals?.credit||0)],backgroundColor:"#ef4444"}]}),[a]),y={responsive:!0,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}},f={responsive:!0,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}};return e.jsxs(T,{user:u.user,children:[e.jsx(D,{title:"Journals"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl font-semibold flex items-center gap-2",children:["Journals",e.jsx(s,{text:"Shows all journal entries within the selected date range. Each row displays a journal line with its account and debit/credit amounts."})]}),e.jsx(A,{href:route("reports.accounting.journals.export",n),className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700",children:"Export Excel"})]}),e.jsxs("form",{onSubmit:g,className:"bg-white shadow rounded p-4 grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"From"}),e.jsx("input",{type:"date",className:"mt-1 w-full border-gray-300 rounded",value:n.from,onChange:t=>x("from",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"To"}),e.jsx("input",{type:"date",className:"mt-1 w-full border-gray-300 rounded",value:n.to,onChange:t=>x("to",t.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:j,children:"Apply"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-6",children:[e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Total Debit ",e.jsx(s,{text:"Sum of all debits within range."})]}),e.jsx("div",{className:"text-xl font-semibold",children:i(Number(a?.totals?.debit||0))})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Total Credit ",e.jsx(s,{text:"Sum of all credits within range."})]}),e.jsx("div",{className:"text-xl font-semibold",children:i(Number(a?.totals?.credit||0))})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Lines ",e.jsx(s,{text:"Total journal lines counted."})]}),e.jsx("div",{className:"text-xl font-semibold",children:a?.totals?.lines||0})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Avg Daily Debit ",e.jsx(s,{text:"Average debit per day over selected period."})]}),e.jsx("div",{className:"text-xl font-semibold",children:i(Number(a?.averages?.daily?.debit||0))})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Avg Weekly Credit ",e.jsx(s,{text:"Average credit per week over selected period."})]}),e.jsx("div",{className:"text-xl font-semibold",children:i(Number(a?.averages?.weekly?.credit||0))})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Avg Monthly Debit ",e.jsx(s,{text:"Average debit per month over selected period."})]}),e.jsx("div",{className:"text-xl font-semibold",children:i(Number(a?.averages?.monthly?.debit||0))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded shadow p-4",children:[e.jsxs("div",{className:"mb-2 font-medium flex items-center gap-2",children:["Daily Debit vs Credit ",e.jsx(s,{text:"Line chart of total debits and credits per day in range."})]}),e.jsx(k,{data:N,options:y})]}),e.jsxs("div",{className:"bg-white rounded shadow p-4",children:[e.jsxs("div",{className:"mb-2 font-medium flex items-center gap-2",children:["Totals ",e.jsx(s,{text:"Bar comparison of total debit vs total credit."})]}),e.jsx(L,{data:v,options:f})]})]}),e.jsxs("div",{className:"bg-white shadow rounded overflow-x-auto",children:[e.jsxs("div",{className:"px-4 py-2 font-medium flex items-center gap-2",children:["Top Accounts by Activity ",e.jsx(s,{text:"Top accounts by highest debit/credit totals in range."})]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Account"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Debit"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Credit"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(a?.topAccounts??[]).map((t,d)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-2",children:[t.code," ",t.name]}),e.jsx("td",{className:"px-4 py-2 text-right",children:i(Number(t.debit_sum||0))}),e.jsx("td",{className:"px-4 py-2 text-right",children:i(Number(t.credit_sum||0))})]},d))})]})]}),e.jsx("div",{className:"bg-white shadow rounded overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-2 text-left",children:["Date ",e.jsx(s,{text:"Journal entry date."})]}),e.jsxs("th",{className:"px-4 py-2 text-left",children:["Memo ",e.jsx(s,{text:"Short description for the journal entry."})]}),e.jsxs("th",{className:"px-4 py-2 text-left",children:["Account ",e.jsx(s,{text:"Account code and name affected by this line."})]}),e.jsxs("th",{className:"px-4 py-2 text-right",children:["Debit ",e.jsx(s,{text:"Debit amount posted to the account."})]}),e.jsxs("th",{className:"px-4 py-2 text-right",children:["Credit ",e.jsx(s,{text:"Credit amount posted to the account."})]})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o.data.flatMap(t=>t.lines.map((d,w)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:t.date}),e.jsx("td",{className:"px-4 py-2",children:t.memo||"-"}),e.jsx("td",{className:"px-4 py-2",children:d.account?`${d.account.code} ${d.account.name}`:"-"}),e.jsx("td",{className:"px-4 py-2 text-right",children:i(Number(d.debit||0))}),e.jsx("td",{className:"px-4 py-2 text-right",children:i(Number(d.credit||0))})]},`${t.id}-${w}`)))})]})}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Page ",o.current_page," of ",o.last_page]})]})]})}export{W as default};

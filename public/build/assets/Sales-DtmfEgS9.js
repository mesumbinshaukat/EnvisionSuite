import{u as N,r as y,j as e,H as b,L as v}from"./app-D_5VtdBN.js";import{A as f}from"./AuthenticatedLayout-C5_-9XrC.js";import{e as w,C as _,b as D,L as F,P as L,f as C,p as S,a as P}from"./index-BLptGMVY.js";import"./transition-BPfikZ3p.js";_.register(D,F,L,C,S,P);function H({auth:c,filters:l,sales:d,total:o,pricingStats:r,paymentAggregates:n=[],discountsByCustomer:m=[],discountsByProduct:h=[]}){const{get:p,data:a,setData:x}=N({from:l.from,to:l.to}),u=s=>{s.preventDefault(),p(route("reports.sales"),{preserveState:!0})},g=y.useMemo(()=>{const s=(d.data||[]).reverse(),t=s.map(i=>new Date(i.created_at).toLocaleDateString()),j=s.map(i=>parseFloat(i.total));return{labels:t,datasets:[{label:"Sales Total",data:j,borderColor:"#2563eb",backgroundColor:"rgba(37,99,235,0.2)"}]}},[d]);return e.jsxs(f,{user:c.user,children:[e.jsx(b,{title:"Sales Report"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Sales Report"}),e.jsxs("form",{onSubmit:u,className:"flex gap-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"From"}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:a.from,onChange:s=>x("from",s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600",children:"To"}),e.jsx("input",{type:"date",className:"border rounded px-3 py-2",value:a.to,onChange:s=>x("to",s.target.value)})]}),e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Apply"}),e.jsx(v,{className:"px-4 py-2 bg-green-600 text-white rounded",href:route("reports.sales.export",{from:a.from,to:a.to}),children:"Export Excel"})]}),e.jsx("div",{className:"bg-white p-4 rounded shadow",children:e.jsx(w,{data:g})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Average Sold Price"}),e.jsx("div",{className:"text-2xl font-semibold",children:Number(r?.avg_sold_price??0).toFixed(2)})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Units @ Original Price"}),e.jsx("div",{className:"text-2xl font-semibold",children:r?.units_original_price??0})]}),e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Units @ Discounted Price"}),e.jsx("div",{className:"text-2xl font-semibold",children:r?.units_discounted_price??0})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.map(s=>e.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[e.jsx("div",{className:"text-xs uppercase text-gray-500",children:s.status}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:["Count: ",s.cnt]}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:["Paid: ",Number(s.paid_sum).toFixed(2)]}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:["Total: ",Number(s.total_sum).toFixed(2)]})]},s.status))}),e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(d.data||[]).map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s.id}),e.jsx("td",{className:"px-4 py-2",children:new Date(s.created_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-2",children:Number(s.total).toFixed(2)})]},s.id))})]}),e.jsxs("div",{className:"p-4 text-right font-semibold",children:["Total: ",Number(o).toFixed(2)]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"Top Discounts by Customer"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Customer"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"Line Discount"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"Header Discount"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"Total Discount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(m||[]).map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s.customer_name||"Walk-in"}),e.jsx("td",{className:"px-4 py-2 text-right",children:Number(s.line_discount).toFixed(2)}),e.jsx("td",{className:"px-4 py-2 text-right",children:Number(s.header_discount).toFixed(2)}),e.jsx("td",{className:"px-4 py-2 text-right font-semibold",children:Number(s.total_discount).toFixed(2)})]},t))})]})]}),e.jsxs("div",{className:"bg-white rounded shadow overflow-x-auto",children:[e.jsx("div",{className:"px-4 py-2 font-semibold",children:"Top Discounts by Product"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs text-gray-500 uppercase",children:"Product"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs text-gray-500 uppercase",children:"Line Discount"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(h||[]).map((s,t)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:s.product_name}),e.jsx("td",{className:"px-4 py-2 text-right",children:Number(s.line_discount).toFixed(2)})]},t))})]})]})]})]})]})}export{H as default};

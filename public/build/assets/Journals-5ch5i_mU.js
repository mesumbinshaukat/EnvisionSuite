import{u as j,j as e,H as b,L as v}from"./app-CtQDaI7d.js";import{T as a}from"./InfoIcon-CwQLPO0h.js";import{A as g}from"./AuthenticatedLayout-BmdE4ikK.js";import{f as l}from"./currency-DO5TMxe2.js";import"./transition-TUICTNyj.js";import"./HelpInjector-BfWS8fx6.js";function C({auth:x,filters:d,entries:o,aggregates:r}){const m=!d.scope||d.scope==="all"?"revenue":d.scope,{data:s,setData:c,get:h,processing:p}=j({from:d.from,to:d.to,scope:m,account:""}),u=t=>{t.preventDefault();const i={from:s.from,to:s.to},n=s.account?.trim()?`account:${s.account.trim()}`:s.scope;h(route("reports.accounting.journals",{...i,scope:n}),{preserveState:!0})};return e.jsxs(g,{user:x.user,children:[e.jsx(b,{title:"Journals"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl font-semibold flex items-center gap-2",children:["Journals",e.jsx(a,{text:"Shows all journal entries within the selected date range. Each row displays a journal line with its account and debit/credit amounts."})]}),e.jsx(v,{href:route("reports.accounting.journals.export",{from:s.from,to:s.to,scope:s.account?.trim()?`account:${s.account.trim()}`:s.scope}),className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700",children:"Export Excel"})]}),e.jsxs("form",{onSubmit:u,className:"bg-white shadow rounded p-4 grid md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"From"}),e.jsx("input",{type:"date",className:"mt-1 w-full border-gray-300 rounded",value:s.from,onChange:t=>c("from",t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"To"}),e.jsx("input",{type:"date",className:"mt-1 w-full border-gray-300 rounded",value:s.to,onChange:t=>c("to",t.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm",children:["Scope ",e.jsx(a,{text:"Filter series and aggregates. For meaningful debit vs credit differences, choose Revenue, Expense, Assets, Liabilities, or a specific account code."})]}),e.jsxs("select",{className:"mt-1 w-full border-gray-300 rounded",value:s.scope,onChange:t=>c("scope",t.target.value),children:[e.jsx("option",{value:"revenue",children:"Revenue"}),e.jsx("option",{value:"expense",children:"Expense"}),e.jsx("option",{value:"assets",children:"Assets"}),e.jsx("option",{value:"liabilities",children:"Liabilities"}),e.jsx("option",{value:"all",children:"All (Totals equal by design)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm",children:["Account Code ",e.jsx(a,{text:"Optional. When provided, overrides scope to focus on a single account (e.g., 4000)."})]}),e.jsx("input",{type:"text",placeholder:"e.g., 4000",className:"mt-1 w-full border-gray-300 rounded",value:s.account,onChange:t=>c("account",t.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:p,children:"Apply"})})]}),s.scope==="all"&&!s.account?.trim()&&e.jsx("div",{className:"text-sm text-amber-700 bg-amber-50 border border-amber-200 rounded p-3",children:"Note: With scope = All, double-entry bookkeeping makes total debits equal total credits. Select a specific scope (e.g., Revenue or Expense) or enter an Account Code to see differentiated charts."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-6",children:[e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Total Debit ",e.jsx(a,{text:"Sum of all debits within range."})]}),e.jsx("div",{className:"text-xl font-semibold",children:l(Number(r?.totals?.debit||0))})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Total Credit ",e.jsx(a,{text:"Sum of all credits within range."})]}),e.jsx("div",{className:"text-xl font-semibold",children:l(Number(r?.totals?.credit||0))})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Lines ",e.jsx(a,{text:"Total journal lines counted."})]}),e.jsx("div",{className:"text-xl font-semibold",children:r?.totals?.lines||0})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Avg Daily Debit ",e.jsx(a,{text:"Average debit per day over selected period."})]}),e.jsx("div",{className:"text-xl font-semibold",children:l(Number(r?.averages?.daily?.debit||0))})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Avg Weekly Credit ",e.jsx(a,{text:"Average credit per week over selected period."})]}),e.jsx("div",{className:"text-xl font-semibold",children:l(Number(r?.averages?.weekly?.credit||0))})]}),e.jsxs("div",{className:"rounded bg-white p-4 shadow",children:[e.jsxs("div",{className:"text-sm text-gray-600 flex items-center gap-1",children:["Avg Monthly Debit ",e.jsx(a,{text:"Average debit per month over selected period."})]}),e.jsx("div",{className:"text-xl font-semibold",children:l(Number(r?.averages?.monthly?.debit||0))})]})]}),e.jsxs("div",{className:"bg-white shadow rounded overflow-x-auto",children:[e.jsxs("div",{className:"px-4 py-2 font-medium flex items-center gap-2",children:["Top Accounts by Activity ",e.jsx(a,{text:"Top accounts by highest debit/credit totals in range."})]}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:"Account"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Debit"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Credit"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:(r?.topAccounts??[]).map((t,i)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-2",children:[t.code," ",t.name]}),e.jsx("td",{className:"px-4 py-2 text-right",children:l(Number(t.debit_sum||0))}),e.jsx("td",{className:"px-4 py-2 text-right",children:l(Number(t.credit_sum||0))})]},i))})]})]}),e.jsx("div",{className:"bg-white shadow rounded overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsxs("th",{className:"px-4 py-2 text-left",children:["Date ",e.jsx(a,{text:"Journal entry date."})]}),e.jsxs("th",{className:"px-4 py-2 text-left",children:["Memo ",e.jsx(a,{text:"Short description for the journal entry."})]}),e.jsxs("th",{className:"px-4 py-2 text-left",children:["Account ",e.jsx(a,{text:"Account code and name affected by this line."})]}),e.jsxs("th",{className:"px-4 py-2 text-right",children:["Debit ",e.jsx(a,{text:"Debit amount posted to the account."})]}),e.jsxs("th",{className:"px-4 py-2 text-right",children:["Credit ",e.jsx(a,{text:"Credit amount posted to the account."})]})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o.data.flatMap(t=>t.lines.map((i,n)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:t.date}),e.jsx("td",{className:"px-4 py-2",children:t.memo||"-"}),e.jsx("td",{className:"px-4 py-2",children:i.account?`${i.account.code} ${i.account.name}`:"-"}),e.jsx("td",{className:"px-4 py-2 text-right",children:l(Number(i.debit||0))}),e.jsx("td",{className:"px-4 py-2 text-right",children:l(Number(i.credit||0))})]},`${t.id}-${n}`)))})]})}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Page ",o.current_page," of ",o.last_page]})]})]})}export{C as default};

import{u as o,j as e,H as x,L as t,b as p}from"./app-D-dFhmuu.js";import{A as m}from"./AuthenticatedLayout-BdfPewrC.js";import{f as a}from"./currency-DO5TMxe2.js";import"./transition-BoplBWov.js";function g({rules:r}){const{processing:l}=o(),d=s=>{confirm("Delete this pricing rule?")&&p.delete(route("pricing.destroy",s))},n=r?.data||[],i=r?.links||[];return e.jsxs(m,{header:e.jsx("h2",{className:"text-xl font-semibold",children:"Pricing Rules"}),children:[e.jsx(x,{title:"Pricing Rules"}),e.jsxs("div",{className:"mx-auto max-w-7xl p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Manage price rules computed from product costs with margins and discounts."}),e.jsx(t,{href:route("pricing.create"),className:"rounded bg-blue-600 px-4 py-2 text-white",children:"New Rule"})]}),e.jsxs("div",{className:"overflow-x-auto rounded bg-white p-4 shadow",children:[e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"p-2",children:"Product"}),e.jsx("th",{className:"p-2",children:"Cost Basis"}),e.jsx("th",{className:"p-2",children:"Margin"}),e.jsx("th",{className:"p-2",children:"Discount"}),e.jsx("th",{className:"p-2",children:"Scope"}),e.jsx("th",{className:"p-2",children:"Active Window"}),e.jsx("th",{className:"p-2",children:"Status"}),e.jsx("th",{className:"p-2 text-right",children:"Actions"})]})}),e.jsxs("tbody",{children:[n.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"p-3 text-center text-gray-500",colSpan:8,children:"No pricing rules found."})}),n.map(s=>e.jsxs("tr",{className:"border-t",children:[e.jsxs("td",{className:"p-2",children:[s.product?.name," ",e.jsxs("span",{className:"text-gray-500",children:["(",s.product?.sku,")"]})]}),e.jsxs("td",{className:"p-2 capitalize",children:[s.cost_basis,s.cost_basis==="fixed"&&e.jsx("span",{className:"ml-1 text-gray-500",children:a(Number(s.fixed_cost||0))})]}),e.jsx("td",{className:"p-2",children:s.margin_type==="percent"?`${Number(s.margin_value||0)}%`:a(Number(s.margin_value||0))}),e.jsx("td",{className:"p-2",children:s.discount_type==="none"?"—":s.discount_type==="percent"?`${Number(s.discount_value||0)}%`:a(Number(s.discount_value||0))}),e.jsx("td",{className:"p-2",children:s.scope_type==="all_units"?"All units":`First ${s.scope_qty||0} units`}),e.jsxs("td",{className:"p-2 whitespace-nowrap",children:[e.jsx("div",{children:s.starts_at?new Date(s.starts_at).toLocaleString():"—"}),e.jsx("div",{children:s.ends_at?new Date(s.ends_at).toLocaleString():"—"})]}),e.jsx("td",{className:"p-2",children:s.active?e.jsx("span",{className:"inline-flex items-center rounded bg-green-100 px-2 py-0.5 text-green-700",children:"Active"}):e.jsx("span",{className:"inline-flex items-center rounded bg-gray-100 px-2 py-0.5 text-gray-700",children:"Inactive"})}),e.jsxs("td",{className:"p-2 text-right space-x-2",children:[e.jsx(t,{href:route("pricing.edit",s.id),className:"rounded border px-2 py-1",children:"Edit"}),e.jsx("button",{onClick:()=>d(s.id),disabled:l,className:"rounded border border-red-600 px-2 py-1 text-red-600",children:"Delete"})]})]},s.id))]})]}),i.length>0&&e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:i.map((s,c)=>s.url?e.jsx(t,{href:s.url,preserveScroll:!0,className:`rounded border px-2 py-1 ${s.active?"bg-blue-600 text-white":""}`,dangerouslySetInnerHTML:{__html:s.label}},c):e.jsx("span",{className:"rounded border px-2 py-1 text-gray-400",dangerouslySetInnerHTML:{__html:s.label}},c))})]})]})]})}export{g as default};

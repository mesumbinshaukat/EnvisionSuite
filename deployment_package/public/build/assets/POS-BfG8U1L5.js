import{u as f,a as _,r as m,j as e,H as v,L as w}from"./app-DUaT__wH.js";import{A as C}from"./AuthenticatedLayout-BRA9NZV-.js";import{B as x,C as k,a as S,b as M,g as P,p as E,d as T,e as D}from"./index-VzF1SlEN.js";import{f as L}from"./currency-DO5TMxe2.js";import"./transition-7jmKK-Rq.js";import"./HelpInjector-BCvt9IJE.js";import"./InfoIcon-ISLSAj6V.js";k.register(S,M,P,E,T,D);function H({auth:u,filters:d,sales:r,summary:c}){const{t}=f(),{data:l,setData:o,get:b,processing:y}=_({from:d.from,to:d.to,payment_method:d.payment_method||""}),j=a=>{a.preventDefault(),b(route("reports.pos"),{preserveState:!0})},n=c.by_method||[],i=c.by_cashier||[],p=m.useMemo(()=>{const a={};try{(r?.data||[]).forEach(s=>{s.user?.id&&(a[s.user.id]=s.user.name)})}catch{}return a},[r]),h=a=>{const s=(a||"").trim();return s?t(s)||s:t("unknown")},g=m.useMemo(()=>({labels:n.map(a=>h(a.payment_method)),datasets:[{label:t("total")||"Total",backgroundColor:"#2563eb",data:n.map(a=>Number(a.s||0))}]}),[n,t]),N=m.useMemo(()=>({labels:i.map(a=>p[a.user_id]||t("unknown")),datasets:[{label:t("total")||"Total",backgroundColor:"#059669",data:i.map(a=>Number(a.s||0))}]}),[i,p,t]);return e.jsxs(C,{user:u.user,children:[e.jsx(v,{title:t("pos_reports")||"POS Reports"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-semibold",children:t("pos_reports")||"POS Reports"}),e.jsx(w,{href:route("reports.pos.export",l),className:"px-3 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700",children:t("export_excel")||"Export Excel"})]}),e.jsxs("form",{onSubmit:j,className:"bg-white shadow rounded p-4 grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:t("from")||"From"}),e.jsx("input",{type:"date",className:"mt-1 w-full border-gray-300 rounded",value:l.from,onChange:a=>o("from",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:t("to_label")||"To"}),e.jsx("input",{type:"date",className:"mt-1 w-full border-gray-300 rounded",value:l.to,onChange:a=>o("to",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:t("payment_method")||"Payment Method"}),e.jsx("input",{className:"mt-1 w-full border-gray-300 rounded",placeholder:`${t("cash")}/${t("card")}/${t("mobile")}...`,value:l.payment_method,onChange:a=>o("payment_method",a.target.value)})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",disabled:y,children:t("apply")||"Apply"})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 shadow rounded",children:[e.jsx("div",{className:"mb-2 font-medium",children:t("totals_by_payment_method")||"Totals by Payment Method"}),e.jsx(x,{data:g})]}),e.jsxs("div",{className:"bg-white p-4 shadow rounded",children:[e.jsx("div",{className:"mb-2 font-medium",children:t("totals_by_cashier")||"Totals by Cashier"}),e.jsx(x,{data:N})]})]}),e.jsx("div",{className:"bg-white shadow rounded overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left",children:t("id")||"ID"}),e.jsx("th",{className:"px-4 py-2 text-left",children:t("date_label")||"Date"}),e.jsx("th",{className:"px-4 py-2 text-left",children:t("customer_label")||"Customer"}),e.jsx("th",{className:"px-4 py-2 text-left",children:t("cashier")||"Cashier"}),e.jsx("th",{className:"px-4 py-2 text-left",children:t("payment")||"Payment"}),e.jsx("th",{className:"px-4 py-2 text-right",children:t("total")||"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.data.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:a.id}),e.jsx("td",{className:"px-4 py-2",children:new Date(a.created_at).toLocaleString()}),e.jsx("td",{className:"px-4 py-2",children:a.customer?.name||t("unknown")}),e.jsx("td",{className:"px-4 py-2",children:a.user?.name||t("unknown")}),e.jsx("td",{className:"px-4 py-2",children:h(a.payment_method)}),e.jsx("td",{className:"px-4 py-2 text-right",children:L(Number(a.total||0))})]},a.id))})]})}),e.jsx("div",{className:"text-xs text-gray-500",children:t("page_of",{current:r.current_page,last:r.last_page})})]})]})}export{H as default};
